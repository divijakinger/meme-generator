{"ast":null,"code":"import _defineProperty from\"C:/divija/meme-generator/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/divija/meme-generator/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/divija/meme-generator/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/divija/meme-generator/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/divija/meme-generator/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import html2canvas from'html2canvas';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Meme(){var _React$useState=React.useState({topText:\"\",bottomText:\"\",randomImage:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),getMeme=_React$useState2[0],setGetMeme=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),allMemeImages=_React$useState4[0],setAllMemeImages=_React$useState4[1];React.useEffect(function(){fetch(\"https://api.imgflip.com/get_memes\").then(function(res){return res.json();}).then(function(data){return setAllMemeImages(data);});},[]);function getMemeImage(){var memes_array=allMemeImages.data.memes;var randomNum=Math.floor(Math.random()*memes_array.length);var url=memes_array[randomNum].url;setGetMeme(function(prevMeme){return _objectSpread(_objectSpread({},prevMeme),{},{randomImage:url});});console.log(getMeme.randomImage);}var handleDownloadImage=React.useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var memeEle,canvas,dataURL;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:memeEle=document.getElementById(\"meme-div\");if(memeEle){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.next=5;return html2canvas(memeEle,{useCORS:true});case 5:canvas=_context.sent;dataURL=canvas.toDataURL('image/png');downloadjs(dataURL,'download.png','image/png');case 8:case\"end\":return _context.stop();}}},_callee);})),[]);function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setGetMeme(function(prevMeme){return _objectSpread(_objectSpread({},prevMeme),{},_defineProperty({},name,value));});}return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-inputs\",type:\"text\",placeholder:\"Enter top text\",name:\"topText\",value:getMeme.topText,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:\"form-inputs\",type:\"text\",placeholder:\"Enter bottom text\",name:\"bottomText\",value:getMeme.bottomText,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"form-button\",onClick:getMemeImage,children:\"Get a new meme image\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"meme\",id:\"meme-div\",children:[/*#__PURE__*/_jsx(\"img\",{src:getMeme.randomImage,className:\"meme--image\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"meme--text top\",children:getMeme.topText}),/*#__PURE__*/_jsx(\"h2\",{className:\"meme--text bottom\",children:getMeme.bottomText})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"download-btn\",onClick:handleDownloadImage,children:\"Download\"})]});}","map":{"version":3,"names":["React","html2canvas","Meme","useState","topText","bottomText","randomImage","getMeme","setGetMeme","allMemeImages","setAllMemeImages","useEffect","fetch","then","res","json","data","getMemeImage","memes_array","memes","randomNum","Math","floor","random","length","url","prevMeme","console","log","handleDownloadImage","useCallback","memeEle","document","getElementById","useCORS","canvas","dataURL","toDataURL","downloadjs","handleChange","event","target","name","value"],"sources":["C:/divija/meme-generator/src/components/Meme.js"],"sourcesContent":["import React from \"react\";\r\nimport html2canvas from 'html2canvas';\r\n\r\nexport default function Meme(){\r\n    const [getMeme,setGetMeme] = React.useState({\r\n        topText : \"\",\r\n        bottomText:\"\",\r\n        randomImage:\"\"\r\n    });\r\n\r\n    const [allMemeImages,setAllMemeImages] = React.useState([]);\r\n    \r\n    React.useEffect(()=>{\r\n        fetch(\"https://api.imgflip.com/get_memes\")\r\n        .then(res => res.json())\r\n        .then(data => setAllMemeImages(data))\r\n    },[])\r\n     \r\n    function getMemeImage(){\r\n        const memes_array = allMemeImages.data.memes;\r\n        const randomNum = Math.floor(Math.random()*memes_array.length);\r\n        const url = memes_array[randomNum].url;\r\n        setGetMeme(prevMeme => ({\r\n            ...prevMeme,\r\n            randomImage : url,\r\n        }));\r\n\r\n        console.log(getMeme.randomImage);\r\n    }\r\n\r\n    const handleDownloadImage = React.useCallback(async () => {\r\n        const memeEle =\r\n          document.getElementById(\"meme-div\");\r\n          \r\n        if (!memeEle) return;\r\n    \r\n        const canvas = await html2canvas(memeEle,{\r\n            useCORS: true,\r\n        });\r\n\r\n        const dataURL = canvas.toDataURL('image/png');\r\n        downloadjs(dataURL, 'download.png', 'image/png');\r\n      }, []);\r\n    \r\n    function handleChange(event){\r\n        const {name,value} = event.target;\r\n        setGetMeme(prevMeme => ({\r\n            ...prevMeme,\r\n            [name]:value\r\n        }))\r\n    }\r\n\r\n    return (\r\n        <main>\r\n            <div className=\"form\">\r\n                <input className=\"form-inputs\" type=\"text\" placeholder=\"Enter top text\" name=\"topText\" value={getMeme.topText} onChange={handleChange}/>\r\n                <input className=\"form-inputs\" type=\"text\" placeholder=\"Enter bottom text\" name=\"bottomText\" value={getMeme.bottomText} onChange={handleChange}/>\r\n                <button className=\"form-button\" onClick={getMemeImage}>Get a new meme image</button>\r\n            </div>\r\n            <div className=\"meme\" id=\"meme-div\">\r\n                <img src={getMeme.randomImage} className=\"meme--image\" />\r\n                <h2 className=\"meme--text top\">{getMeme.topText}</h2>\r\n                <h2 className=\"meme--text bottom\">{getMeme.bottomText}</h2>\r\n            </div>\r\n            <button type=\"button\" className=\"download-btn\" onClick={handleDownloadImage}>Download</button>\r\n        </main>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}